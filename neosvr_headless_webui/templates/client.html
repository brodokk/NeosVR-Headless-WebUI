{% extends "base.html" %}

{% block content_header %}

  <div class="row mb-2">
    <div class="col-sm-6">
      <h1 class="m-0 text-dark">{{ g.client_name }}</h1>
    </div>
  </div>

{% endblock %}

{% block content %}

  <div class="row">
    <div class="col-lg-12">
      <div class="btn-group mb-3" role="group">
        <a class="btn btn-dark active font-weight-bold" href="/client/{{ g.client_id }}">Server info</a>
        {% for world in g.worlds %}
        <a class="btn btn-dark" href="/client/{{ g.client_id }}/session/{{ world[0] }}">{{ world[1]["name"] }}</a>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="row">

    <div class="col-xl-6">

      <div class="row">

        <div class="col-xl-12">

          <div class="card">
            <div class="card-body">
              Switch between sessions on this server using the buttons above. The table to the side/below offers a quick overview of the sessions that are currently running. The stats below relate only to this specific server. For an overview of all servers, go back to the <a href="/dashboard">dashboard</a>.
            </div>
          </div>

        </div>

      </div>

      <div class="row">

        <div class="col-xl-6">
          <div class="info-box bg-primary">
            <span class="info-box-icon"><i class="far fa-user"></i></span>
            <div class="info-box-content">
              <span class="info-box-text">Users Connected</span>
              <span class="info-box-number">{{ g.summary["current_users"] }}</span>
            </div>
          </div>
        </div>

        <div class="col-xl-6">
          <div class="info-box bg-success">
            <span class="info-box-icon"><i class="fas fa-user"></i></span>
            <div class="info-box-content">
              <span class="info-box-text">Users Present</span>
              <span class="info-box-number">{{ g.summary["present_users"] }}</span>
            </div>
          </div>
        </div>

        <div class="col-xl-6">
          <div class="info-box bg-warning">
            <span class="info-box-icon"><i class="fas fa-globe"></i></span>
            <div class="info-box-content">
              <span class="info-box-text">Sessions/Worlds</span>
              <span class="info-box-number">{{ g.summary["sessions"] }}</span>
            </div>
          </div>
        </div>

        <div class="col-xl-6">
          <div class="info-box bg-danger">
            <span class="info-box-icon"><i class="fas fa-users"></i></span>
            <div class="info-box-content">
              <span class="info-box-text">Total Max Capacity</span>
              <span class="info-box-number">{{ g.summary["max_users"] }}</span>
            </div>
          </div>
        </div>

      </div>

    </div>

    <div class="col-xl-6">

      <div class="row">

        <div class="col-xl-12">

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">World/session list</h3>
            </div>
            <div class="card-body p-0">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Current users</th>
                    <th scope="col">Present users</th>
                    <th scope="col">Access level</th>
                    <th scope="col">Max users</th>
                  </tr>
                </thead>
                <tbody>
                  {% for world in g.worlds %}
                  <tr>
                    <td><a href="/client/{{ g.client_id }}/session/{{ world[0] }}"><b>{{ world[1]["name"] }}</b></a></td>
                    <td>{{ world[1]["users"] }}</td>
                    <td>{{ world[1]["present"] }}</td>
                    <td>{{ world[1]["access_level"] }}</td>
                    <td>{{ world[1]["max_users"] }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Client info</h3>
            </div>
            <div class="card-body">
              <b>Version:</b> {{ g.version }}<br />
              <b>Compatibility Hash:</b> <code>{{ g.compatibility_hash }}</code><br />
              <b>Machine ID: </b> <code>{{ g.machine_id }}</code><br />
              <b>Supported Network Protocols: </b> {{ ", ".join(g.supported_network_protocols) }}<br />
            </div>
          </div>

        </div>

      </div>

    </div>

  </div>

{% endblock %}
